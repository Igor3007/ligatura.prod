document.addEventListener("DOMContentLoaded",(function(){function loadScript(url,callback){var script=document.createElement("script");script.readyState?script.onreadystatechange=function(){"loaded"!=script.readyState&&"complete"!=script.readyState||(script.onreadystatechange=null,callback())}:script.onload=function(){callback()},script.src=url,document.getElementsByTagName("head")[0].appendChild(script)}document.querySelector(".header__burger").addEventListener("click",(function(){document.querySelector(".nav-main").classList.toggle("open")})),document.querySelector(".nav-main").addEventListener("click",(function(){document.querySelector(".nav-main").classList.remove("open")})),document.querySelector(".nav-main nav").addEventListener("click",(function(e){e.stopPropagation(!0)})),document.querySelector(".close-mobile-menu").addEventListener("click",(function(e){document.querySelector(".nav-main").classList.remove("open")})),document.querySelector('[data-modal-open="callback"]').addEventListener("click",(function(){document.querySelector(".modal-callback").classList.toggle("open")})),document.querySelector(".modal-callback").addEventListener("click",(function(){document.querySelector(".modal-callback").classList.remove("open")})),document.querySelector(".modal-callback__wrp").addEventListener("click",(function(e){e.stopPropagation(!0)})),document.querySelector(".modal-callback__close").addEventListener("click",(function(e){document.querySelector(".modal-callback").classList.remove("open")})),loadScript("/js/lib/glide.min.js",(function(){var fb;new Glide('[data-glide="fb"]',{type:"slider",gap:0,perView:1,autoplay:5e3,hoverpause:!0,animationDuration:300}).mount()}));var mask=Maska.create('input[type="tel"]');function ajax(params,btn,response){let xhr=new XMLHttpRequest;xhr.open("POST",params.url),xhr.send(params.data),xhr.onload=function(){response(xhr.status,xhr.response)},xhr.onerror=function(){console.error("error ajax query")},xhr.onreadystatechange=function(){3==xhr.readyState&&btn.classList.add("btn-loading"),4==xhr.readyState&&setTimeout((function(){btn.classList.remove("btn-loading")}),300)}}document.querySelector('[data-form="result"]').addEventListener("submit",(function(e){e.preventDefault();const _this=this,fields=this.querySelectorAll("input"),STATE=this.querySelector("[data-form=status]");let valid=!0;if(fields.forEach((function(item){""==item.value?(item.classList.add("err"),valid=!1):item.classList.remove("err")})),valid){let formData=new FormData(this),btn=this.querySelector('[type="submit"]');btn.classList.add("btn-loading"),ajax({url:this.getAttribute("action"),data:formData},btn,(function(status,response){let dataResponse=JSON.parse(response);switch(dataResponse.status){case"send":_this.reset(),console.log(dataResponse.msg),STATE.innerHTML='<span class="msg" >'+dataResponse.msg+"</span>";break;case"error":STATE.innerHTML='<span class="err" >'+dataResponse.msg+"</span>";break;default:alert("error: error send form")}}))}else STATE.innerHTML='<span class="err" >*Все поля обязательны для заполнения</span>'})),document.querySelector('[data-form="callback"]').addEventListener("submit",(function(e){e.preventDefault();let _this=this;const fields=this.querySelectorAll("input"),STATE=this.querySelector("[data-form=status]"),valid=!0;if(fields.forEach((function(item){""==item.value?(item.classList.add("err"),valid=!1):item.classList.remove("err")})),valid){let formData=new FormData(this),btn=this.querySelector('[type="submit"]');btn.classList.add("btn-loading"),ajax({url:this.getAttribute("action"),data:formData},btn,(function(status,response){let dataResponse=JSON.parse(response);switch(dataResponse.status){case"send":_this.reset(),console.log(dataResponse.msg),STATE.innerHTML='<span class="msg" >'+dataResponse.msg+"</span>",document.querySelector(".modal-callback").classList.add("fadeout"),setTimeout((function(){document.querySelector(".modal-callback").classList.remove("fadeout"),document.querySelector(".modal-callback").classList.remove("open")}),1e3);break;case"error":STATE.innerHTML='<span class="err" >'+dataResponse.msg+"</span>";break;default:alert("error: error send form")}}))}else STATE.innerHTML='<span class="err" >*Все поля обязательны для заполнения</span>'}))}));